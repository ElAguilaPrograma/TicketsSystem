@if (isOpen()) {
<div class="fixed inset-0 bg-black/50 z-40 lg:hidden" (click)="toggleSidebar()"></div>
}

<app-confirm-dialog [(isOpen)]="showConfirmDialog" title="Logout" message="Do you want to log out of your session?"
    (confirm)="handleConfirm()"></app-confirm-dialog>

<aside [class.-translate-x-full]="!isOpen()"
    class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform lg:translate-x-0 border-r border-brand-border flex flex-col">

    <div class="px-6 py-6 flex items-center gap-3">
        <div
            class="bg-blue-600 text-white p-2 rounded-xl flex items-center justify-center shadow-lg shadow-blue-900/20">
            <ng-icon name="heroShieldCheck" class="text-2xl" strokeWidth="2"></ng-icon>
        </div>
        <div class="flex flex-col">
            <span class="font-bold text-base leading-tight">Incident Portal</span>
            <span class="text-gray-500 text-xs font-medium">El Aguila Programa</span>
        </div>
    </div>

    <nav class="flex flex-col gap-1 px-5 grow mt-2 text-white">
        <a class="flex items-center gap-3 px-3 py-3 rounded-lg bg-blue-600 transition-all shadow-md shadow-blue-900/20 group hover:bg-blue-500"
            href="#">
            <ng-icon name="heroTicket" class="text-xl group-hover:scale-110 transition-transform"></ng-icon>
            <span class="font-semibold text-sm">All Tickets</span>
        </a>
    </nav>

    <div class="px-3 py-3">
        <app-button variant="outline" [fullWidth]="true" class="justify-center" (click)="darkModeService.toggleTheme()">
            @if (darkModeService.currentMode) {
            <ng-icon name="heroMoon" class="text-xl mr-2"></ng-icon> : Dark Mode
            } @else {
            <ng-icon name="heroSun" class="text-xl mr-2"></ng-icon> : Light Mode
            }
        </app-button>
    </div>

    <!-- Aqui usare un async pipe para obtener el usuario logueado-->
    <div class="p-4 mx-2 mb-4 border-t border-brand-border">
        <div class="flex items-center gap-3 pt-2">
            <div
                class="w-10 h-10 min-w-10 rounded-full bg-[#FFD4B8] flex items-center justify-center overflow-hidden border border-gray-700">
                <img src="https://ui-avatars.com/api/?name=Alex+Rivera&background=FFD4B8&color=000" alt="User"
                    class="w-full h-full object-cover">
            </div>

            <div class="flex flex-col grow min-w-0">
                <span class="font-semibold text-sm truncate">Eduardo Mu√±oz</span>
                <span class="text-gray-500 text-xs truncate">Admin</span>
            </div>

            <app-icon-button (click)="openConfirmDialog()">
                <ng-icon name="heroArrowRightStartOnRectangle" class="text-xl"></ng-icon>
            </app-icon-button>
        </div>
    </div>
</aside>